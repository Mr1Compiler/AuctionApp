@model Lab2Auction.Models.Auction
@{
    ViewData["Title"] = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1 class="mb-4">Auction Details</h1>

<div class="card shadow p-4 mb-4">
    <h4 class="mb-3">📦 Auction Info</h4>
    <div class="row">
        <div class="col-md-6 mb-2">
            <strong>Name:</strong> <span>@Model.Name</span>
        </div>
        <div class="col-md-6 mb-2">
            <strong>Owner:</strong> <span>@Model.UserEmail</span>
        </div>
        <div class="col-md-6 mb-2">
            <strong>Starting Price:</strong> <span>$@Model.StartingPrice</span>
        </div>
        <div class="col-md-6 mb-2">
            <strong>End Date:</strong> <span>@Model.EndDate.ToString("yyyy-MM-dd hh:mm tt")</span>
        </div>
        <div class="col-12 mb-2">
            <strong>Description:</strong> <p class="mt-1">@Model.Description</p>
        </div>
    </div>
</div>

<h4 class="mb-3">🖼 Photos</h4>

@if (Model.Images != null && Model.Images.Any())
{
    <div class="row">
        @foreach (var image in Model.Images)
        {
            <div class="col-md-4 mb-4">
                <div class="card shadow-sm h-100">
                    <img src="@image.ImagePath" class="card-img-top" style="object-fit: cover; height: 250px;" alt="Auction Image">
                </div>
            </div>
        }
    </div>
}
else
{
    <div class="alert alert-light border text-center">
        <strong>No images uploaded</strong> for this auction.
    </div>
}

@if (User.Identity.IsAuthenticated &&
    Model.UserId != User.FindFirst("http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier")?.Value &&
    Model.EndDate > DateTime.Now)
{
    <div class="mt-3">
        <a asp-action="Create" asp-controller="Bids" asp-route-auctionId="@Model.Id" class="btn btn-success me-2">
            💰 Add Bid
        </a>
    </div>
}

<a asp-action="Index" class="btn btn-outline-primary mt-3">← Back to Auctions</a>

